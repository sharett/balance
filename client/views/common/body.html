<template name="body">
	{{> dialogs}}
	{{> navbar}}
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span3">
				<div class="well sidebar-nav">
					{{> groups}}
				</div><!--/.well -->
			</div><!--/span-->
			<div class="span9">
				<div class="row-fluid">
				{{> main}}
				</div>
			</div>
		</div>
	</div> <!-- /container -->
</template>

<template name="dialogs">
  {{#if showEditGroupDialog}}
  {{> editGroup}}
  {{/if}}
  {{#if showProfileDialog}}
  {{> editProfile}}
  {{/if}}
  {{#if showTransactionDialog}}
  {{> editTransaction}}
  {{/if}}
</template>

<template name="navbar">
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
	<div class="container-fluid">
	  <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	  </button>
	  <a class="brand go-home" href="#">Balance</a>
	  <div class="nav-collapse collapse">
		<ul class="nav">
		  <li><a href="#" class="go-home">Home</a></li>
		  {{#if currentUser}}
		  <li><a href="#" class="editprofile">Profile</a></li> 
		  {{/if}}
		</ul>
	  </div><!--/.nav-collapse -->
	  <div style="float: right">
  	  {{loginButtons align="right"}}
	  </div>
	</div>
  </div>
</div>
</template>

<template name="main">
{{#if currentUser}}
 {{#if selected_group}}
   {{#if is_user_member_of_selected_group}}
		 {{#if selected_member}}
			 {{> member}}
		 {{else}}
			 {{> transactions}}
		 {{/if}}
	 {{else}}
	   {{> home}}
	 {{/if}}
 {{else}}
   {{> home}}
 {{/if}}
{{else}}
 {{> home}}
{{/if}}
</template>

<template name="home">
	<div class="hero-unit">
		<h1>Balance</h1>
		<p>Balance is a tool to keep track of shared finances for groups.</p>
		<p><a href="#" class="btn btn-primary btn-medium">Learn more &raquo;</a></p>
	</div>
	<div class="row-fluid">
		<div class="span4">
			<h2>Mutual credit</h2>
			<p>Balance is a mutual credit system.  Everyone's balance starts at zero.  In the
			simplest transaction, one person's balance goes down and the other's goes up by an
			equal amount.</p>
			<p><a class="btn" href="#">View details &raquo;</a></p>
		</div><!--/span-->
		<div class="span4">
			<h2>Transactions</h2>
			<p>Keep track of complicated transactions, such as bills that one person pays, but
			everyone shares in.  Balance keeps a running total of how much each person owes or
			is owed.</p>
			<p><a class="btn" href="#">View details &raquo;</a></p>
		</div><!--/span-->
		<div class="span4">
			<h2>Fewest payments</h2>
			<p>When the time comes to settle up, Balance will calculate the minimum number of 
			payments required to pay everyone and bring everyone's balance back to zero.</p>
			<p><a class="btn" href="#">View details &raquo;</a></p>
		</div><!--/span-->
	</div><!--/row-->
	<div class="row-fluid">
		<div class="span4">
			<h2>Credit limits</h2>
			<p>You decide how much credit you are willing to extend to each person.  Balance makes
			sure no transactions will exceed those limits.</p>
			<p><a class="btn" href="#">View details &raquo;</a></p>
		</div><!--/span-->
		<div class="span4">
			<h2>Permissions</h2>
			<p>You set what permissions are needed to create, modify and remove transactions.  An informal
			group of friends may allow any transactions, while others may require approval of each
			transaction.</p>
			<p><a class="btn" href="#">View details &raquo;</a></p>
		</div><!--/span-->
		<div class="span4">
			<h2>Currencies</h2>
			<p>Balance supports the currency of your choice, including time-based currencies for keeping
			track of hours worked.</p>
			<p><a class="btn" href="#">View details &raquo;</a></p>
		</div><!--/span-->
	</div><!--/row-->
</template>
